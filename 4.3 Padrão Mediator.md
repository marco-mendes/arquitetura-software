## Padrão Mediator

Um exemplo de uso do padrão Mediator é mostrado abaixo, no contexto de uma compra eletrônica.

<img width="1552" alt="image" src="https://github.com/user-attachments/assets/9f2b04c7-5094-44f2-99f0-6b13095afbcd" />

### Explicação Arquitetural do Diagrama

O diagrama representa uma **arquitetura orientada a eventos** para um fluxo de **processamento de pedidos** baseada no **padrão Mediator**. Esse padrão é aplicado através do uso de **filas de mensagens** (destacadas em amarelo), garantindo que os componentes do sistema **não se comuniquem diretamente**, mas sim **através de um mediador centralizado**.

---

### 1. Padrão Mediator na Arquitetura
O **padrão Mediator** é um estilo arquitetural que utiliza um componente central (mediador) para **gerenciar e coordenar a comunicação entre os serviços**. No contexto desse sistema de pedidos:

✅ **O Mediator gerencia as interações entre os serviços**:
- Nenhum serviço interage diretamente com outro.
- O Mediator é o único ponto que publica e consome eventos nas filas de mensagens.

✅ **Benefícios dessa abordagem**:
- **Coordenação centralizada**: O Mediator define a ordem de execução das operações.
- **Redução de dependências diretas**: Os serviços são desacoplados e fáceis de modificar.
- **Melhor controle de fluxo**: Permite aplicação de regras de negócio no Mediator.

---

### 2. Fluxo Arquitetural da Solução

1. **Cliente Inicia o Pedido**
   - O **Cliente** faz um pedido, que é enviado ao **Mediator**.
   - O **Mediator** publica o evento na **Fila de Processamento de Pedido**.

2. **Avaliação de Crédito**
   - O **Mediator** publica um evento na **Fila de Avaliação de Crédito**.
   - O **Serviço de Crédito** lê a mensagem e inicia a avaliação de crédito.

3. **Verificação de Estoque**
   - O **Mediator** publica um evento na **Fila de Verificação de Estoque**.
   - O **Serviço de Estoque** verifica a disponibilidade do produto.

4. **Preparação e Despacho**
   - O **Mediator** publica um evento na **Fila de Preparação para Despacho**.
   - O **Serviço de Despacho** lê a mensagem e organiza a logística de entrega.

5. **Notificações para o Cliente**
   - Durante todo o processo, o **Mediator** publica eventos na **Fila de Notificações ao Cliente**.
   - O **Serviço de Notificações** lê a mensagem e envia atualizações ao **Cliente**.

---

### 4. Tecnologias Recomendadas para Implementação
Este padrão pode ser implementado com diversas tecnologias de mensageria e controle de fluxo. Algumas opções populares incluem:

* Apache Camel → Framework de integração que implementa padrões de roteamento e mediação, permitindo orquestrar fluxos de mensagens através de rotas centralizadas.
* NServiceBus → Framework de mensageria distribuída que fornece endpoints e handlers para implementar um Mediator centralizado em arquiteturas orientadas a eventos.
* Spring Integration → Framework de mensageria do ecossistema Spring que fornece canais, handlers e gateways para compor fluxos de mensagens centralizados com padrão Mediator.
* AWS Step Functions → Orquestrador serverless que atua como Mediator central, coordenando chamadas a múltiplos serviços com definição explícita de estados, condições e transições.
* Google Workflows → Orquestrador de workflows no Google Cloud que coordena serviços e implementa o padrão Mediator através de fluxos declarativos com controle de ordem, condições e compensações.
* Azure Logic Apps → Plataforma de orquestração e automação no ecossistema Azure que implementa o padrão Mediator através de fluxos declarativos, orquestrando APIs, filas, funções e conectores.
